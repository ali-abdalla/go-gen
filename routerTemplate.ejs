
func Install<%=capitalizeName%>Router(db gorm.DB, router *gin.Engine) {

	// GET /<%=name%>
	// GET all <%=name%>
	router.GET("/<%=name%>", func(c *gin.Context) {
		<% var findGuid = false; attributes.forEach(function(attr) {
			if (attr.name == "Guid") { findGuid = true; } })
			if (findGuid) { %>if guid := c.Query("guid"); guid != "" {
		    var <%=name%> model.<%=capitalizeName%>
		    query := &model.<%=capitalizeName%>{
		      <%=capitalizeName%>Data: model.<%=capitalizeName%>Data{Guid: guid},
		    }
			  db.Where(&query).First(&<%=name%>)
			  c.JSON(http.StatusOK, <%=name%>)
			} else {
			  var <%=name%> []model.<%=capitalizeName%>
			  db.Find(&<%=name%>)
			  c.JSON(http.StatusOK, <%=name%>)
			}<% } else { %>var <%=name%> []model.<%=capitalizeName%>
		db.Find(&<%=name%>)
		c.JSON(http.StatusOK, <%=name%>) <% } %>
	})

	// GET /<%=name%>/:id
	// GET <%=name%> by id
	router.GET("/<%=name%>/:id", func(c *gin.Context) {
		_id := c.Param("id")
		if id, err := strconv.ParseUint(_id, 10, 64); err == nil {
			var <%=name%> model.<%=capitalizeName%>
			query := &model.<%=capitalizeName%>{
				<%=capitalizeName%>Id: model.<%=capitalizeName%>Id{Id: id},
			}
			db.Where(&query).First(&<%=name%>)
			c.JSON(http.StatusOK, <%=name%>)
		} else {
			log.Print(err)
			c.AbortWithError(http.StatusBadRequest, err)
		}
	})

	// POST /<%=name%>
	// POST new <%=name%> to database
	router.POST("/<%=name%>", func(c *gin.Context) {
		var <%=name%>Post model.<%=capitalizeName%>Post
		if err := c.BindJSON(&<%=name%>Post); err == nil {
			<%=name%> := &model.<%=capitalizeName%>{
				<%=capitalizeName%>Data: <%=name%>Post.<%=capitalizeName%>Data,<% if(trace) { %>
				Trace: <%=name%>Post.Trace,<% } %>
			}<% var foundGuid = false; attributes.forEach(function(attr) { if (attr.name == "Guid") { foundGuid = true; } }) %>
			<% if (foundGuid) { %><%=name%>.Guid = uuid.NewV4().String()<% } %>
			db.Create(&<%=name%>)
			c.JSON(http.StatusOK, <%=name%>)
		} else {
			log.Print(err)
			c.AbortWithError(http.StatusBadRequest, err)
		}
	})

}
